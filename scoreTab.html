<!DOCTYPE html>
<html>
<head>
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport" />
<meta name="format-detection" content="telephone=no" />

<link rel="shortcut icon" type="image/x-icon" href="images/golf.png?">
<title>Golfs du Qu&eacute;bec</title>
<meta content="Golf GPS, Qu&eacute;bec, Canada, Golf du Qu&eacute;bec, Clubs de golf au Qu&eacute;bec, Qu&eacute;bec golf" name="keywords" />
<meta content="R&eacute;pertoire des clubs de golf du Qu&eacute;bec. GPS golf." name="description" />
<link href="misc/init.css" rel="stylesheet" media="screen" type="text/css" />
<link href="misc/format.css" rel="stylesheet" media="screen" type="text/css" />
<link href="misc/golfGPS.css" rel="stylesheet" media="screen" type="text/css" />
<link href="misc/tabScore.css" rel="stylesheet" media="screen" type="text/css" />

<script type="text/javascript" src="misc/util.js"></script>
<script type="text/javascript" src="misc/utilGolfGPS.js"></script>
<script type="text/javascript" src="misc/geoLocal.js"></script>

<style>
#gameBut{
visibility:hidden;
}

</style>

<script type="text/javascript"> 
<!--

var gameID;
var userId;
var clubName = "";

function askSaveGame(askSave){
if (askSave){
	var conf = confirm("Voulez-vous terminer cette partie?");
	var action = 1;
}else{
	var conf = confirm("Voulez-vous supprimer cette partie?");
	var action = 0;
}
if (conf){
	getInfo("endDelGame?data=" + gameID + "$" + action, closePage);
	}
}

function closePage(oRes){
	if (!oRes.ok && oRes.message){
		var modLayer = document.getElementById('modalDiv');
		alert(langLbl[oRes.message]);
		authentifier();
		modLayer.style.visibility="visible";
	}else{
		window.close();
	}
}

function setIdent(){

}

function identified(){

}

function initPage(){

setFontSize();
userId = GetCookie("userID");

var data = getURLdata();
data = data.split("$");
gameID = (data[0]);
clubName = (data[1]);

getInfo("getGameTab?data=" + gameID, showGame);

}

function showGame(gData){
var gameData = gData[0];
var par = gameData.par;
var tb = document.getElementById('gameCard'); 
var gameBut = document.getElementById('gameBut');
var tabTitle = document.getElementById('tabTitle');
var divLoad = document.getElementById('divLoad');

divLoad.style.display = "none";

if (gameData.score_date != null){
	tabTitle.innerHTML = (gameData.score_date) + "&nbsp;-&nbsp;" +  clubName;
}else{
	tabTitle.innerHTML = getDateTime() + "&nbsp;-&nbsp;" +  clubName;
	gameBut.style.visibility = "visible";
}

var nt = 19;
if(par.T14 == null || par.T14 == 0)
	nt = 10;
	
var trElem = document.createElement("tr");
//trElem.setAttribute('class', 'listitem');
var tdH = '<th></th>';
for (var i= 1; i < 10; i++){
	tdH += '<th>' + i + '</th>';
}
if (nt == 19){
tdH += '<th>Out</th>';
for (var i= 10; i < nt; i++){
	tdH += '<th>' + i + '</th>';
}
tdH += '<th>In</th>';
}
tdH += '<th>Total</th>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);

var po = 0, pi = 0;
var trElem = document.createElement("tr");
//trElem.setAttribute('class', 'listitem');
var tdH = '<th>Par</th>';
for (var i= 1; i < 10; i++){
	tdH += '<td>' + eval("par.T" + i) + '</td>';
	po += eval("par.T" + i);
}
if (nt == 19){
tdH += '<td>' + po + '</td>';
for (var i= 10; i < nt; i++){
	tdH += '<td>' + eval("par.T" + i) + '</td>';
	pi += eval("par.T" + i);
}
tdH += '<td>' + pi + '</td>';
}
tdH += '<td>' + (po + pi) + '</td>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);


var trElem = document.createElement("tr");
//trElem.setAttribute('rowspan', '2');

var po = 0, pi = 0;   /// Les coups
var tdH = '<th rowspan="2">' + GetCookie("userName") + '</th>';
for (var i= 1; i < 10; i++){
	var s = (eval("gameData.T" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		po += s;
	}else{
		tdH += '<td></td>';
	}
}
if (nt == 19){
	tdH += '<td>' + po + '</td>';
for (var i= 10; i < nt; i++){
	var s = (eval("gameData.T" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		pi += s;
	}else{
		tdH += '<td></td>';
	}
}
tdH += '<td>' + pi + '</td>';
}
tdH += '<td>' + (po + pi) + '</td>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);

var trElem = document.createElement("tr");
var po = 0, pi = 0;   /// Le différentiel
var tdH = "";
for (var i= 1; i < 10; i++){
	var s = eval("gameData.T" + i);
	var p = eval("par.T" + i);
	if ( typeof s == "number" ){
		var d = s - p;	
		var className = "par";
		if (d < 0)
			className = "bird";
		if (d < -1)
			className = "eagl";
		if (d > 0)
			className = "bog";
		if (d > 1)
			className = "dbog";
		if (d > 2)
			className = "tbog";
		po += d;
		if (d == 0)
			d = "-";
		tdH += '<td class="' + className + '">' + d + '</td>';
	}else{
		tdH += '<td></td>';
	}
}
if (nt == 19){
	tdH += '<td>' + po + '</td>';
for (var i= 10; i < nt; i++){
	var s = eval("gameData.T" + i);
	var p = eval("par.T" + i);
	if ( typeof s == "number" ){
		var d = s - p;	
		var className = "par";
		if (d < 0)
			className = "bird";
		if (d < -1)
			className = "eagl";
		if (d > 0)
			className = "bog";
		if (d > 1)
			className = "dbog";
		if (d > 2)
			className = "tbog";
		pi += d;
		if (d == 0)
			d = "-";
		tdH += '<td class="' + className + '">' + d + '</td>';
	}else{
		tdH += '<td></td>';
	}
}
tdH += '<td>' + pi + '</td>';
}
tdH += '<td>' + (po + pi) + '</td>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);

var trElem = document.createElement("tr");
var po = 0, pi = 0;   /// Les puts
var tdH = '<th>Putts</th>';
for (var i= 1; i < 10; i++){
	var s = (eval("gameData.P" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		po += s;
	}else{
		tdH += '<td></td>';
	}
}
if (nt == 19){
	tdH += '<td>' + po + '</td>';
for (var i= 10; i < nt; i++){
	var s = (eval("gameData.P" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		pi += s;
	}else{
		tdH += '<td></td>';
	}
}
tdH += '<td>' + pi + '</td>';
}
tdH += '<td>' + (po + pi) + '</td>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);

var trElem = document.createElement("tr");
var po = 0, pi = 0;   /// Les pénalités

var tdH = '<th>' + langLbl["penal"] + '</th>';
for (var i= 1; i < 10; i++){
	var s = (eval("gameData.L" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		po += s;
	}else{
		tdH += '<td></td>';
	}
}
if (nt == 19){
	tdH += '<td>' + po + '</td>';
for (var i= 10; i < nt; i++){
	var s = (eval("gameData.L" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		pi += s;
	}else{
		tdH += '<td></td>';
	}
}
tdH += '<td>' + pi + '</td>';
}
tdH += '<td>' + (po + pi) + '</td>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);
x=1;
}

// -->
</script> 
</head>
<body onload="initPage()">
<div id="duobutton">
<a href="#"  id="butMenu" title="Menu" onclick="showMenu()"><img id="logomenu" alt="Menu" height="32" width="64" src="images/menu.png" /></a>
<a href="#"  onclick="window.close(); return false;"><text id="close"></text></a>
<div id="fontAdjust" class="unselectable">
<div class="divFont" onclick="setFontSize(0.2, this)"><div class="divFontSize">A</div><div class="fontLogo">&#8593;</div></div>
<div class="divFont" onclick="setFontSize(-0.2, this)"><div class="divFontSize fontSmall">A</div><div class="fontLogo">&#8595;</div></div>
</div>
</div>


<form id="setScore">
<ul class="pageitem">
<li id="tabTitle" class="listitem">

</li>

<li class="listitem">
<div id="p1" name="p1" class="cartePts">
	<table class="cartePts">
	<tbody id="gameCard">
<div id="divLoad"><img id="imgLoad" alt="Chargement en cours..." height="64" width="64" src="images/loading.gif" /></div>
	</tbody>
	</table>
</div>
</li>
</ul>
<div id="gameBut">
<center>
<button id="saveGame" class="bouton" type="button" onClick=""askSaveGame(1); return false;">&nbsp;<text id="fgame">Terminer la partie</text>&nbsp;</button>
<button id="delGame" class="bouton" type="button" onClick=""askSaveGame(-1); return false;">&nbsp;<text id="rgame">Supprimer la partie</text>&nbsp;</button>
</center>
</div>

</form>


<div id="modalDiv"></div>
<div id="authLayer">
<!--
<div id="divLoad"><img id="imgLoad" alt="Chargement en cours..." height="64" width="64" src="images/loading.gif" /></div>
// -->
</div>

</body>