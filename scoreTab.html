<!DOCTYPE html>
<html>
<head>
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type" />
<meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport" />
<meta name="format-detection" content="telephone=no" />
<link rel="SHORTCUT ICON" href="favicon.ico">
<link href="favicon.ico" rel="apple-touch-icon" />
<link href="favicon.ico" rel="apple-touch-startup-image" />
<link href="misc/format.css" rel="stylesheet" media="screen" type="text/css" />
<link href="misc/golfGPS.css" rel="stylesheet" media="screen" type="text/css" />
<link href="misc/tabScore.css" rel="stylesheet" media="screen" type="text/css" />

<title>Clubs de golf au Québec</title>
<meta content="Golf, Québec, Canada, Golf du Québec, Clubs de golf au Québec, Québec golf" name="keywords" />
<meta content="Répertoire des clubs de golf du Québec." name="description" />

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<script type="text/javascript" src="misc/util.js"></script>
<script type="text/javascript" src="misc/utilGolfGPS.js"></script>
<script type="text/javascript" src="misc/geoLocal.js"></script>


<script type="text/javascript"> 
<!--

var HOSTserv = "https://nodejs-mongo-persistent-cd-serv.1d35.starter-us-east-1.openshiftapps.com/";
var gameID;
var userId;
var clubName = "";

function askSaveGame(askSave){
if (askSave){
	var conf = confirm("Voulez-vous terminer cette partie?");
	var action = 1;
}else{
	var conf = confirm("Voulez-vous supprimer cette partie?");
	var action = 0;
}
if (conf){
	getInfo("endDelGame?data=" + gameID + "$" + action);
	window.close();
	}
}


function initPage(){
userId = GetCookie("userID");

var data = getURLdata();
data = data.split("$");
gameID = (data[0]);
clubName = (data[1]);

setFontSizeGolfGPS();

getInfo("getGameTab?data=" + gameID, showGame);

}

function showGame(gData){
var gameData = gData[0];
var par = gameData.par;
var tb = document.getElementById('gameCard'); 
var gameBut = document.getElementById('gameBut');
var tabTitle = document.getElementById('tabTitle');

if (gameData.score_date != null){
	gameBut.style.visibility = "hidden";
	tabTitle.innerHTML = getDateTime(gameData.score_date) + "&nbsp;-&nbsp;" +  clubName;
}else{
	tabTitle.innerHTML = getDateTime() + "&nbsp;-&nbsp;" +  clubName;
}

var nt = 19;
if(par.T14 == null || par.T14 == 0)
	nt = 10;
	
var trElem = document.createElement("tr");
//trElem.setAttribute('class', 'listitem');
var tdH = '<th></th>';
for (var i= 1; i < 10; i++){
	tdH += '<th>' + i + '</th>';
}
if (nt == 19){
tdH += '<th>Out</th>';
for (var i= 10; i < nt; i++){
	tdH += '<th>' + i + '</th>';
}
tdH += '<th>In</th>';
}
tdH += '<th>Total</th>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);

var po = 0, pi = 0;
var trElem = document.createElement("tr");
//trElem.setAttribute('class', 'listitem');
var tdH = '<th>Par</th>';
for (var i= 1; i < 10; i++){
	tdH += '<td>' + eval("par.T" + i) + '</td>';
	po += eval("par.T" + i);
}
if (nt == 19){
tdH += '<td>' + po + '</td>';
for (var i= 10; i < nt; i++){
	tdH += '<td>' + eval("par.T" + i) + '</td>';
	pi += eval("par.T" + i);
}
tdH += '<td>' + pi + '</td>';
}
tdH += '<td>' + (po + pi) + '</td>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);


var trElem = document.createElement("tr");
//trElem.setAttribute('rowspan', '2');

var po = 0, pi = 0;   /// Les coups
var tdH = '<th rowspan="2"></th>';
for (var i= 1; i < 10; i++){
	var s = (eval("gameData.T" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		po += s;
	}else{
		tdH += '<td></td>';
	}
}
if (nt == 19){
	tdH += '<td>' + po + '</td>';
for (var i= 10; i < nt; i++){
	var s = (eval("gameData.T" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		pi += s;
	}else{
		tdH += '<td></td>';
	}
}
tdH += '<td>' + pi + '</td>';
}
tdH += '<td>' + (po + pi) + '</td>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);

var trElem = document.createElement("tr");
var po = 0, pi = 0;   /// Le différentiel
var tdH = "";
for (var i= 1; i < 10; i++){
	var s = eval("gameData.T" + i);
	var p = eval("par.T" + i);
	if ( typeof s == "number" ){
		var d = s - p;	
		var className = "par";
		if (d < 0)
			className = "bird";
		if (d > 0)
			className = "bog";
		if (d > 1)
			className = "dbog";
		if (d > 2)
			className = "tbog";
		po += d;
		if (d == 0)
			d = "-";
		tdH += '<td class="' + className + '">' + d + '</td>';
	}else{
		tdH += '<td></td>';
	}
}
if (nt == 19){
	tdH += '<td>' + po + '</td>';
for (var i= 10; i < nt; i++){
	var s = eval("gameData.T" + i);
	var p = eval("par.T" + i);
	if ( typeof s == "number" ){
		var d = s - p;	
		var className = "par";
		if (d < 0)
			className = "bird";
		if (d > 0)
			className = "bog";
		if (d > 1)
			className = "dbog";
		if (d > 2)
			className = "tbog";
		pi += d;
		if (d == 0)
			d = "-";
		tdH += '<td class="' + className + '">' + d + '</td>';
	}else{
		tdH += '<td></td>';
	}
}
tdH += '<td>' + pi + '</td>';
}
tdH += '<td>' + (po + pi) + '</td>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);

var trElem = document.createElement("tr");
var po = 0, pi = 0;   /// Les puts
var tdH = '<th>Putts</th>';
for (var i= 1; i < 10; i++){
	var s = (eval("gameData.P" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		po += s;
	}else{
		tdH += '<td></td>';
	}
}
if (nt == 19){
	tdH += '<td>' + po + '</td>';
for (var i= 10; i < nt; i++){
	var s = (eval("gameData.P" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		pi += s;
	}else{
		tdH += '<td></td>';
	}
}
tdH += '<td>' + pi + '</td>';
}
tdH += '<td>' + (po + pi) + '</td>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);

var trElem = document.createElement("tr");
var po = 0, pi = 0;   /// Les pénalités
var tdH = '<th>Pénal.</th>';
for (var i= 1; i < 10; i++){
	var s = (eval("gameData.L" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		po += s;
	}else{
		tdH += '<td></td>';
	}
}
if (nt == 19){
	tdH += '<td>' + po + '</td>';
for (var i= 10; i < nt; i++){
	var s = (eval("gameData.L" + i));
	if ( typeof s == "number" ){
		tdH += '<td>' + s + '</td>';
		pi += s;
	}else{
		tdH += '<td></td>';
	}
}
tdH += '<td>' + pi + '</td>';
}
tdH += '<td>' + (po + pi) + '</td>';
trElem.innerHTML = tdH;
tb.appendChild(trElem);
x=1;
}

// -->
</script> 
</head>
<body onload="initPage()">
<div id="duobutton"><a href="#"  onclick="window.close(); return false;">Fermer</a>
<button type="button" id="changeTaille" title="Taille de police" onclick="changeTaille()"><img id="imgTaille" alt="Taille de police" height="20" width="45" src="images/taille.png" /></button>
</div>


<form id="setScore">
<ul class="pageitem">
<li id="tabTitle" class="listitem">

</li>

<li class="listitem">
<div id="p1" name="p1" class="cartePts">
	<table class="cartePts">
	<tbody id="gameCard">
	</tbody>
	</table>
</div>
</li>
</ul>
<div id="gameBut">
<center><input id="saveGame" class="bouton" type="button" onClick="askSaveGame(1); return false;" value=" Terminer la partie " />
<input id="delGame" class="bouton" type="button" onClick="askSaveGame(0); return false;" value="Supprimer la partie" /></center>
</div>

</form>
</body>