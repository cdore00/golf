<!DOCTYPE html>
<html>
<head>
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport" />

<title>Valeur actualis&eacute;e</title>
<meta content="Valeur pr&eacute;sente, Calcul de la valeur pr&eacute;sente, Valeur actualisée" name="keywords" />
<meta content="Calcul de la valeur pr&eacute;sente." name="description" />
<link href="misc/format.css" rel="stylesheet" media="screen" type="text/css" />

<script type="text/javascript" src="misc/util.js"></script> 
<script type="text/javascript" src="misc/cleave.js"></script>

<style>
th{
text-align: right;
}
.inputtext{
text-align: center;
}
sup {
    vertical-align: super;
}
input {
  font-family: monospace;
}
label {
  display: block;
}
#bottombar {
    text-align: center;
	}
.formrow1 {
    min-height: inherit;
}
</style>
<script type="text/javascript" language="Javascript">
<!-- 
var theForm = null;
var oSimul;

function calculVA(cInt){
var Vact, Vint, Van, nbrAn, Vfut;
var lblAn = document.getElementById("parAn");
var fut = document.getElementById("valFut");
Vact = theForm.valAct.value;
Vact = Vact.replace(/,/g , "");
Vint = theForm.valInt.value;
Vint = Vint / 100;
Van = eval(theForm.valAn.value);
nbrAn = eval(theForm.valNan.value);
Vfut = theForm.valFut.value;
Vfut = Vfut.replace(/,/g , "");

lblAn.innerHTML = listCas.lbla(Van);

if (cInt){
	var Vint = Vfut / Vact;
	Vint = Math.pow( Vint , ( 1 / nbrAn * Van ) );
	Vint = Math.round((Vint - 1) * 10000);
	theForm.valInt.value = Vint / 100;
}else{
	var VF = Vact * Math.pow( (1+Vint) ,(nbrAn/Van));
	VF = Math.round(VF * 100) / 100;
	theForm.valFut.value = VF;
	setTimeout(function() {
		pussTab(fut)
	}, 100);
}

listCas.upd(new listCas.Cas(theForm.valAct.value, theForm.valInt.value, theForm.valAn.value, theForm.valNan.value, theForm.valFut.value));
}

function pussTab(oInput){
oInput.focus();
theForm.valAct.focus();
var e = new Event("keydown");
  //e.key="Tab";    // just enter the char you want to send 
  //e.keyCode=e.key.charCodeAt(0);
  e.keyCode=9;
  e.which=e.keyCode;
  e.altKey=false;
  e.ctrlKey=true;
  e.shiftKey=false;
  e.metaKey=false;
  e.bubbles=true;
  oInput.dispatchEvent(e);
}
function initPage(cInt){
theForm = document.getElementById("critere");
//alert("Ok");
if (document.body.style.fontSize == "")
	document.body.style.fontSize = "1em";
if (cInt)
	calculVA(cInt);
	
theForm.valAct.focus();
var cleaveNumeral = new Cleave('.input-numeral', {
    numeral: true,
    numeralThousandsGroupStyle: 'thousand'
});
var cleaveNumeral = new Cleave('.input-fut', {
    numeral: true,
    numeralThousandsGroupStyle: 'thousand'
});
}
function otest(){
alert("ok = " + myO.tot(2));
}

var lCas = function(){
	this.liste = [];
	this.iCas = 0;
	this.upd = function (oC, add){
		if (add)
			i = this.liste.length;
		this.liste[i] = oC;
		this.iCas = i;
		return i;
	}
	this.lbla = function(Van){
		if (Van == 1){
			return "par année";
		}else{
			if (Van < 1){
				var nMois = Van / ( 1 / 12);
				nMois = Math.round(nMois * 1000);
				return "chaque " + (nMois / 1000) + " mois";
			}else{
				return "chaque " + Van + " ans";
			}
		}	
	}
	this.Cas = function(VA, t, a, N, VF){
		this.VA = VA;
		this.t = t;
		this.a = a;
		this.N = N;
		this.VF = VF;
		return this;
	}
	
}

function ajouterCas(){
listCas.upd(new listCas.Cas(100, 10, 1, 1, 110), true);
}

function listeSimul(){
oSimul = document.getElementById("tableSimul");
oListe = document.getElementById("tableCas");

if (oSimul.style.display=="" || oSimul.style.display=="block"){
	oSimul.style.display="none";
	buildTable(oListe);
	oListe.style.display="block";
}else{
	oSimul.style.display="block";
	oListe.style.display="none";
}

}

function buildTable(oListe){
var tblList = document.getElementById("tblList");
if (tblList)
	tblList.parentNode.removeChild(tblList);

var tblElem = document.createElement("table");
tblElem.setAttribute('id', 'tblList');
var theadElem = document.createElement("thead");
var tbodyElem = document.createElement("tbody");
tblElem.appendChild(theadElem);
tblElem.appendChild(tbodyElem);

var trElem = document.createElement("tr");
trElem.innerHTML = '<th class="tblSelect">VA</th><th class="tblSelect">t%</th><th class="tblSelect">per</th><th class="tblSelect">Ans</th><th class="tblSelect">VF</th><th class="tblSelect"></th>';
theadElem.appendChild(trElem);

var trElem = document.createElement("tr");
trElem.innerHTML = '<td class="tblSelect">100</td><td class="tblSelect">10</td><td class="tblSelect">1</td><td class="tblSelect">1</td><td class="tblSelect">110</td><td class="tblSelect"></td>';
tbodyElem.appendChild(trElem);

oListe.appendChild(tblElem);

}

// Liste globale des cas
var listCas = new lCas();
ajouterCas();
//listCas.upd(new listCas.Cas(101, 10, 1, 1, 110), true);

// -->
</script>


</head>

<body onload="initPage()">

<script type="text/javascript" language="Javascript">
<!--
// -->
</script>

<div id="topbar" class="vert">

<div id="titre"><text id="title">Valeur actualis&eacute;e</text></div>
<div id="fontAdjust">
<div class="divFont" onclick="setFontSize(0.2, this)"><div class="divFontSize">A</div><div class="fontLogo">&#8593;</div></div>
<div class="divFont" onclick="setFontSize(-0.2, this)"><div class="divFontSize fontSmall">A</div><div class="fontLogo">&#8595;</div></div>
</div>
</div>

<div id="content">
<ul id="pageZone" class="pageitem" style="visibility: visible;">
<li class="listitem">

	<form id="critere" action="javascript:void(0);">
	<div id="tableSimul" class="formrow1">
	<table class="cartePts">
		<tbody id="gameList">
		<tr><th colspan=3><b>VF = VA x ( 1 + t )<sup><sup>N/a</sup></sup></b></th></tr>
		<tr><th>VA</th><th>Valeur&nbsp;actuelle</th>
		<td><input id="valAct" class="inputtext input-numeral" type="text" maxlength="10" value="100" onchange="calculVA()" onfocus="this.select();"/></td></tr>
		<tr><th>t</th><th>Intérêt %</th>
		<td><input id="valInt" class="inputtext" type="text" maxlength="10" value="10" onchange="calculVA()" onfocus="this.select();"/></td></tr>
		<tr><th>a</th><th id="parAn">par année</th>
		<td><input id="valAn"  class="inputtext" type="text" maxlength="10" value="1" onchange="calculVA()" onfocus="this.select();"/></td></tr>
		<tr><th>N</th><th>Nombre&nbsp;d'années</th>
		<td><input id="valNan" class="inputtext" type="text" maxlength="10" value="1" onchange="calculVA()" onfocus="this.select();"/></td></tr>
		<tr><th>VF</th><th>Valeur future</th>
		<td><input id="valFut" class="inputtext input-fut" type="text" maxlength="10" value="110" onchange="calculVA(true)" onblur="initPage(true)" onfocus="this.select();"/></td></tr>
		</tbody>
	</table>
	</div>
	<div id="tableCas" class="formrow1">
	
	</div>
	</form>	
</li>
</ul>

</div>



<div id="bottombar" class="vert">
<button onclick="ajouterCas()">Ajouter</button><button onclick="listeSimul()">Lister</button>
</div>

<div id="copyright">
<a href="mailto:cdore00@yahoo.ca?Subject=Golfs%20du%20Qu&eacute;bec">Copyright &copy; 2005-2017</a>
</div>

</body>
</html>
